import os
import sys
import urllib.request
from urllib.error import HTTPError
from urllib.parse import urlencode
subject = "안녕하세요"
content = "안녕" \
          "<br><font color=blue>파란색 글씨</font>"
def naver_cafe_post(subject, content):
    token = "AAAAOufTIU1zfnoo-_et-2F6i5Bup4KHi_ZPXmA6TW5HZ9QFdvyldczQwEhHiVSQIjlk72r5Qyz8BO8KY1BhueUfuvg"
    header = "Bearer " + token  # Bearer 다음에 공백 추가
    clubid = '30323519'
    menuid = '1'
    url = "https://openapi.naver.com/v1/cafe/" + clubid + "/menu/" + menuid + "/articles"

    subject = urllib.parse.quote(subject)
    content = urllib.parse.quote(content)
    data = urlencode({'subject': subject, 'content': content}).encode()
    request = urllib.request.Request(url, data=data)
    request.add_header("Authorization", header)
    try:
        response = urllib.request.urlopen(request)
    except HTTPError as e:
        print("url open failed", e, subject, content)
        return
    rescode = response.getcode()
    if rescode == 200:
        response_body = response.read()
        print(response_body.decode('utf-8'))
    else:
        print("Error Code:" + rescode)


naver_cafe_post(subject,content)
